<!doctype html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Damoko</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>

<style>
html,body{
  height:100%;
  margin:0;
  overflow:hidden;
}

body{
  background:url('https://i.imgur.com/DSl7y8j.jpeg') center/cover fixed;
  display:flex;
  align-items:center;
  justify-content:center;
  transition: background 0.8s ease;
}

/* Dark mode */
body.dark-mode{
  background:url('https://i.imgur.com/jqNCobK.jpeg') center/cover fixed;
}

/* carte du jeu / bio */
.game-card, .bio-card{
  background:rgba(0,0,0,0.45);
  backdrop-filter:blur(14px);
  border-radius:24px;
  padding:16px;
  border:1px solid rgba(255,255,255,0.25);
  box-shadow:0 25px 60px rgba(0,0,0,.6);
}

/* canvas */
canvas{
  image-rendering:pixelated;
  background:rgba(135,206,235,0.85);
  border-radius:16px;
}

/* leaderboard */
#leaderboard{
  margin-top:10px;
  text-align:left;
  font-size:12px;
  color:white;
  opacity:0.85;
}

/* Toggle circle animation */
.toggle-circle{
  transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}
.toggle-glow{
  animation: pulse-glow 2s ease-in-out infinite;
}
@keyframes pulse-glow{
  0%,100%{ box-shadow:0 0 20px rgba(255,193,7,0.5),0 0 40px rgba(255,193,7,0.3);}
  50%{ box-shadow:0 0 30px rgba(255,193,7,0.8),0 0 60px rgba(255,193,7,0.5);}
}
body.dark-mode .toggle-glow{
  animation: pulse-glow-night 2s ease-in-out infinite;
}
@keyframes pulse-glow-night{
  0%,100%{ box-shadow:0 0 20px rgba(99,102,240,0.5),0 0 40px rgba(99,102,240,0.3);}
  50%{ box-shadow:0 0 30px rgba(99,102,240,0.8),0 0 60px rgba(99,102,240,0.5);}
}
</style>
</head>

<body>

<!-- MENU -->
<div id="menu" class="bg-black/60 backdrop-blur-xl p-6 rounded-3xl w-full max-w-md text-center text-white shadow-2xl border border-white/20">
  <h1 class="text-2xl font-bold mb-4">Damoko</h1>
  <p class="text-sm mb-6 opacity-90">Choisis ce que tu veux faire</p>

  <div class="flex gap-4 justify-center mb-4">
    <button onclick="openBio()" class="px-6 py-3 rounded-xl bg-emerald-600 hover:scale-105 transition font-bold">BIO</button>
    <button onclick="openGame()" class="px-6 py-3 rounded-xl bg-indigo-600 hover:scale-105 transition font-bold">JEU</button>
  </div>

  <!-- Toggle Jour/Nuit -->
  <div class="flex justify-center">
    <button id="toggle-button" onclick="toggleTheme()" class="toggle-glow relative w-16 h-8 rounded-full cursor-pointer flex items-center p-0.5 transition-all duration-500 border border-white/50 hover:scale-110" style="background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);" aria-label="Basculer entre mode jour et nuit">
      <span class="absolute left-1.5 text-sm">â˜€</span>
      <span class="absolute right-1.5 text-sm">ðŸŒ™</span>
      <div id="toggle-circle" class="toggle-circle w-7 h-7 bg-white rounded-full shadow-xl flex items-center justify-center text-sm z-10">â˜€</div>
    </button>
  </div>
</div>

<!-- BIO -->
<div id="bio" class="hidden bio-card w-full max-w-md text-center text-white shadow-2xl border border-white/20 overflow-y-auto flex flex-col items-center">
  <img src="https://i.imgur.com/KAlQ1zn.png" alt="header" class="w-full rounded-2xl mb-2.5 shadow-lg">
  <h1 class="text-xl font-bold text-white mb-1.5 drop-shadow-lg" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.8);">Damoko</h1>
  <p class="text-xs text-white/95 mb-3 leading-relaxed font-medium" style="text-shadow: 1px 1px 6px rgba(0,0,0,0.9);">
    Salut moi c'est <b class="text-amber-300">Damoko</b>,<br>
    un youtubeur et joueur Minecraft !
  </p>
  <div class="space-y-2 w-full">
    <a href="https://www.youtube.com/@damoko_off" target="_blank" class="block bg-white/25 backdrop-blur-sm text-white font-semibold text-xs py-2 px-4 rounded-xl hover:bg-white/40 hover:scale-105 transition-all duration-300 shadow-lg border border-white/30">ðŸ“º ChaÃ®ne YouTube</a>
    <button onclick="openDiscordModal()" class="w-full bg-white/25 backdrop-blur-sm text-white font-semibold text-xs py-2 px-4 rounded-xl hover:bg-white/40 hover:scale-105 transition-all duration-300 shadow-lg border border-white/30">ðŸ’¬ Discord</button>
  </div>
  <button onclick="backToMenu()" class="mt-4 px-4 py-2 bg-white/20 rounded-xl hover:bg-white/40 transition text-white">â¬… Retour</button>
</div>

<!-- Discord modal -->
<div id="discord-modal" class="fixed inset-0 bg-black/70 backdrop-blur-sm hidden items-center justify-center z-50 p-4" onclick="closeDiscordModal(event)">
  <div class="bg-black/60 backdrop-blur-xl p-8 rounded-3xl max-w-md w-full text-center shadow-2xl border border-white/30 transform transition-all relative" onclick="event.stopPropagation()">
    <div class="text-6xl mb-4">ðŸ’¬</div>
    <h2 class="text-2xl font-bold text-white mb-4" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.8);">Discord</h2>
    <p class="text-lg text-white/95 mb-6 font-medium" style="text-shadow: 1px 1px 6px rgba(0,0,0,0.9);">
      Mon discord est : <span class="text-indigo-300 font-bold cursor-pointer hover:text-indigo-200 transition-colors" onclick="copyDiscord(event)">damoko_off</span>
    </p>
    <div id="copy-toast" class="hidden absolute top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-6 py-3 rounded-lg shadow-xl font-semibold">âœ“ CopiÃ© !</div>
    <button onclick="closeDiscordModal(event)" class="bg-white/25 backdrop-blur-sm text-white font-semibold py-3 px-8 rounded-xl hover:bg-white/40 transition-all duration-300 shadow-lg border border-white/30">Fermer</button>
  </div>
</div>

<!-- JEU -->
<div id="game" class="hidden game-card flex flex-col items-center">
  <canvas id="gameCanvas" width="360" height="220"></canvas>
  <p class="text-white text-sm mt-2 opacity-80">Espace ou FlÃ¨che Haut pour sauter</p>
  <div id="leaderboard"></div>
  <button onclick="backToMenu()" class="mt-3 px-4 py-2 bg-white/20 rounded-xl hover:bg-white/40 transition text-white">â¬… Retour</button>
</div>

<script>
/* NAVIGATION */
const menu=document.getElementById("menu");
const bio=document.getElementById("bio");
const game=document.getElementById("game");
const lb=document.getElementById("leaderboard");

/* Toggle Jour/Nuit */
let isDay=true;
function toggleTheme(){
  const body=document.body;
  const toggleCircle=document.getElementById('toggle-circle');
  const toggleButton=document.getElementById('toggle-button');
  isDay=!isDay;
  if(!isDay){
    body.classList.add('dark-mode');
    toggleCircle.style.transform='translateX(32px)';
    toggleCircle.textContent='ðŸŒ™';
    toggleButton.style.background='linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)';
  } else {
    body.classList.remove('dark-mode');
    toggleCircle.style.transform='translateX(0)';
    toggleCircle.textContent='â˜€';
    toggleButton.style.background='linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)';
  }
}

/* Discord functions */
function copyDiscord(e){
  e.stopPropagation();
  navigator.clipboard.writeText('damoko_off').then(()=>{
    const toast=document.getElementById('copy-toast');
    toast.classList.remove('hidden');
    setTimeout(()=>{toast.classList.add('hidden');},2000);
  });
}
function openDiscordModal(){ document.getElementById('discord-modal').classList.remove('hidden'); document.getElementById('discord-modal').classList.add('flex'); }
function closeDiscordModal(e){ e.stopPropagation(); const m=document.getElementById('discord-modal'); m.classList.add('hidden'); m.classList.remove('flex'); }

/* NAVIGATION */
function openBio(){ menu.classList.add("hidden"); bio.classList.remove("hidden"); }
function openGame(){ menu.classList.add("hidden"); game.classList.remove("hidden"); reset(); loop(); }
function backToMenu(){ bio.classList.add("hidden"); game.classList.add("hidden"); menu.classList.remove("hidden"); }

/* ===== JEU MC ===== */
const canvas=document.getElementById("gameCanvas");
const ctx=canvas.getContext("2d");
let player={x:40,y:150,w:20,h:28,vy:0,jump:false};
let blocks=[];
let score=0,dead=false;
const gravity=0.6;
const jumpPower=-8;
let speed=4;

/* SPAWN BLOC VARIÃ‰ */
function spawnBlock(){
  if(dead) return;
  const types=[{w:20,h:20},{w:30,h:20},{w:15,h:15},{w:40,h:20}];
  const b=types[Math.floor(Math.random()*types.length)];
  blocks.push({x:360,y:158,w:b.w,h:b.h});
}
setInterval(spawnBlock,1200);

/* RESET */
function reset(){
  blocks=[];
  score=0;
  dead=false;
  speed=4;
  player.y=150;
  player.vy=0;
  displayLeaderboard(getLeaderboard());
}

/* DRAW */
function drawGround(){ ctx.fillStyle="#22c55e"; ctx.fillRect(0,180,360,10); ctx.fillStyle="#92400e"; ctx.fillRect(0,190,360,30);}
function drawPlayer(){ ctx.fillStyle="#facc15"; ctx.fillRect(player.x,player.y,20,12); ctx.fillStyle="#2563eb"; ctx.fillRect(player.x,player.y+12,20,16);}
function drawBlock(b){ ctx.fillStyle="#16a34a"; ctx.fillRect(b.x,b.y,b.w,b.h); ctx.fillStyle="#14532d"; ctx.fillRect(b.x,b.y+12,b.w,8);}

/* LEADERBOARD */
function getLeaderboard(){ return JSON.parse(localStorage.getItem("mcLeaderboard")||"[]"); }
function updateLeaderboard(s){ let lbData=getLeaderboard(); lbData.push(s); lbData.sort((a,b)=>b-a); lbData=lbData.slice(0,5); localStorage.setItem("mcLeaderboard",JSON.stringify(lbData)); displayLeaderboard(lbData);}
function displayLeaderboard(data){ if(!lb) return; lb.innerHTML="<b>Leaderboard:</b><br>"+data.map((v,i)=>`${i+1}. ${v}`).join("<br>"); }

/* LOOP */
let lastTime=0;
function loop(timestamp){
  if(!lastTime) lastTime=timestamp;
  const delta=timestamp-lastTime;
  ctx.clearRect(0,0,360,220);
  drawGround();
  drawPlayer();
  player.vy+=gravity;
  player.y+=player.vy;
  if(player.y>=150){ player.y=150; player.jump=false; }
  blocks.forEach(b=>{ b.x-=speed; drawBlock(b); if(player.x<b.x+b.w && player.x+player.w>b.x && player.y<b.y+b.h && player.y+player.h>b.y){ dead=true; }});
  blocks=blocks.filter(b=>b.x>-30);

  // score par seconde
  if(!dead && delta>0){ score+=(delta/1000); lastTime=timestamp; }
  ctx.fillStyle="#000"; ctx.font="14px Arial"; ctx.fillText("Score: "+Math.floor(score),10,20);
  if(!dead && score>0) speed=4+Math.floor(score/10);
  if(dead){ ctx.fillStyle="rgba(0,0,0,.6)"; ctx.fillRect(0,0,360,220); ctx.fillStyle="#fff"; ctx.font="20px Arial"; ctx.fillText("GAME OVER",110,110); ctx.font="12px Arial"; ctx.fillText("Clique pour rejouer",120,130); updateLeaderboard(Math.floor(score)); return; }
  requestAnimationFrame(loop);
}

/* CONTROLES */
window.addEventListener("keydown",e=>{ if((e.code==="Space" || e.code==="ArrowUp") && !player.jump){ player.vy=jumpPower; player.jump=true; }});
canvas.addEventListener("click",()=>{ if(dead){ reset(); loop(); return; } if(!player.jump){ player.vy=jumpPower; player.jump=true; } });
</script>

</body>
</html>
